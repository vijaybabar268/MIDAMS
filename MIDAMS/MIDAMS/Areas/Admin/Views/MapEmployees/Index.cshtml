@model MIDAMS.Areas.Admin.ViewModels.MapEmployeeViewModel

@{
    ViewBag.Title = "Map Employees to Clients";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
    int srNo = 1;
}

<h2 class="adminTitle">@ViewBag.Title</h2>

@Html.ActionLink("Map Employee", "New", "MapEmployees", null, new { @class = "btn btn-primary commonNewAddBtn" })

<div class="tableDiv">
    <table class="table table-bordered table-hover table-responsive table-striped">
        <thead>
            <tr>
                <th>Sr</th>
                <th>Client Name</th>
                <th>Map Employees</th>
                @*<th>Region</th>
                    <th>Branch/Location</th>
                    <th>Industry Type</th>
                    <th style="width: 20%;">Site Address</th>
                    <th style="width: 20%;">Corporate Office Address</th>
                    <th>Manage</th>*@
                <th style="width: 20%;">Action</th>
            </tr>
        </thead>
        <tbody>
            @{
                foreach (var item in Model.MapEmployeesToClients.GroupBy(c => c.ClientId, (key, g) => new { ClientId = key, Employees = g.ToList() }))
                {
                    <tr>
                        <td>@srNo</td>
                        <td>@Model.Clients.FirstOrDefault(x => x.Id == item.ClientId).ClientName</td>
                        <td>@item.Employees.Count</td>
                        @*<td>@Model.Regions.FirstOrDefault(x => x.Id == item.RegionId).Name</td>
                            <td>@Model.BranchLocations.FirstOrDefault(x => x.Id == item.BranchLocationId).Name</td>
                            <td>@Model.IndustryTypes.FirstOrDefault(x => x.Id == item.IndustryTypeId).Name</td>
                            <td>@item.SiteAddress</td>
                            <td>@item.CorpOfficeAddress</td>

                            <td>
                                @Html.ActionLink("Role & Responsibility", "RoleAndResponsibility", "Clients", new { id = item.Id }, new { @class = "btn btn-link" }) |
                                @Html.ActionLink("Contacts", "Edit", "Clients", new { id = item.Id }, new { @class = "btn btn-link" }) |
                                @Html.ActionLink("Relations", "Edit", "Clients", new { id = item.Id }, new { @class = "btn btn-link" }) |
                                @Html.ActionLink("Add Employee", "AddEmployees", "Clients", new { id = item.Id }, new { @class = "btn btn-link" })
                            </td>*@
                        <td>
                            @Html.ActionLink("Update", "Update", "Clients", new { id = "" }, new { @class = "btn btn-link" }) |
                            @Html.ActionLink("View Employees", "Update", "Clients", new { id = "" }, new { @class = "btn btn-link" }) |
                            @using (@Html.BeginForm("Delete", "Clients", FormMethod.Post, new { style = "display: inline;", onClick = "return confirm('Are you sure you want tp perform this action?')" }))
                            {
                                @Html.AntiForgeryToken()
                                @Html.Hidden("id", "")

                                <button type="submit" class="btn btn-link">Delete</button>
                            }
                        </td>
                    </tr>
                    srNo++;
                }
            }
        </tbody>
    </table>
</div>

